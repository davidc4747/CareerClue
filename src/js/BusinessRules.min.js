angular.module("BusinessRules",["CallStoredProcedure","DBConstants"]),angular.module("BusinessRules").service("JobRules",["CallStoredProcedure","DBConstants",function(a,b){this.getStatusTypes=function(c){var d={fName:b.SP_JOB_STATUS,params:[],actionType:"select",loginRequired:!1};a(d,c)},this.getUserJobs=function(c){var d={fName:b.SP_JOB_BY_USERID,params:["User_Id"],actionType:"select",loginRequired:!0};a(d,function(a){for(var b=0;b<a.length;b++)a[b].Job_Rating=parseInt(a[b].Job_Rating),a[b].TravelTime=parseInt(a[b].TravelTime),a[b].DateApplied=new Date(a[b].DateApplied);c&&c(a)})},this.saveJob=function(c,d){var e={fName:b.SP_JOB_SAVE,params:["User_Id",c.JobInfo_Id,c.CompanyName||"",c.CompanySite||"",c.Job_Title||"",c.Company_Address||"",c.TravelTime||0,c.DateApplied||(new Date).toISOString(),c.Source||"",c.Source_Link||"",c.Job_Rating||0,c.JobDescrip_Notes||"",c.Company_Notes||"",c.JobStatus_Id||1],actionType:"select",loginRequired:!0};a(e,function(a){var b=a[0].JobId||null;d&&d(b)})},this.deleteJob=function(c){var d={fName:b.SP_JOB_DELETE,params:[c.JobInfo_Id],actionType:"update",loginRequired:!0};a(d,function(){})},this.getjobStatusCount=function(c){var d={fName:b.SP_JOB_STATUS_COUNT,params:["User_Id"],actionType:"select",loginRequired:!0};a(d,c)}}]),angular.module("BusinessRules").service("UserRules",["CallStoredProcedure","DBConstants","$http",function(a,b,c){this.userInfo=function(c){var d={fName:b.SP_USER_BY_ID,params:["User_Id"],actionType:"select",loginRequired:!0};a(d,function(a){var b=null;a.length>0&&(b=a[0]),console.log("UserInfo:",b),c(b)})},this.updateUserInfo=function(c,d){var e={fName:b.SP_USER_UPDATE_INFO,params:["User_Id",c.Username,c.User_Email],actionType:"select",loginRequired:!0};a(e,d)},this.updateUserPass=function(a,b){var d=c({method:"post",url:"php/AuthenticatorScript.php",data:{method:"updateuserpass",username:a.Username,curpass:a.curPass,newpass:a.newPass,repass:a.rePass}});d.success(function(a){console.log("UserRules.updateUserPass: ",a);var c="true"===a;b(c)})}}]);