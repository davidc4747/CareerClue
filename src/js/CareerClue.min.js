angular.module("CareerClue",["ngRoute","ngAnimate","CareerClue.SideBar","CareerClue.Job","CareerClue.Dash","CareerClue.SignIn","CareerClue.SignUp","CareerClue.MultiJob"]),angular.module("CareerClue").config(["$routeProvider",function(a){a.when("/Dash",{templateUrl:"views/Dash/dash.html",controller:"DashCtrl"}).when("/MultiJob/:statusType?/:companyName?",{templateUrl:"views/MultiJob/multijob.html",controller:"MultiJobCtrl"}).when("/SingleJob",{templateUrl:"views/SingleJob/singlejob.html",controller:"SingleJobCtrl"}).when("/EditJob/:jobId",{templateUrl:"views/EditJob/editjob.html",controller:"EditJobCtrl"}).when("/SignIn",{templateUrl:"views/SignIn/signin.html",controller:"SignInCtrl"}).when("/SignUp",{templateUrl:"views/SignUp/signup.html",controller:"SignUpCtrl"}).when("/ForgotPassword",{templateUrl:"views/ForgotPass/forgotPass.html",controller:"ForgotPassCtrl"}).when("/ForgotUsername",{templateUrl:"views/ForgotUsername/forgotUsername.html",controller:"ForgotUserCtrl"}).otherwise({redirectTo:"/SignIn"})}]),angular.module("CareerClue.Dash",["Repository"]).controller("DashCtrl",["$scope",function(a){}]),angular.module("CareerClue.MultiJob",["Repository"]).controller("MultiJobCtrl",["$scope","Repository","$routeParams","Session",function(a,b,c,d){a.statusFilter=c.statusType,a.search=c.companyName,a.jobs=[],b.getUserJobs(function(b){a.jobs=b}),a.$on("removeJob",function(b,c){for(var d=a.jobs.length-1;d>=0;d--)a.jobs[d].JobInfo_Id===c.Id&&a.jobs.splice(d,1)}),a.createJob=function(){a.search="";var b={JobInfo_Id:-1,CompanyName:"",JobStatus_Name:a.statusFilter};(0==a.jobs.length||a.jobs[0].JobInfo_Id>0)&&a.jobs.unshift(b)}}]),angular.module("CareerClue.SignIn",["Repository"]).controller("SignInCtrl",["$scope","$location","Repository",function(a,b,c){a.user={name:"",password:"",remember:!1},a.errors=[],c.getId(function(a){a>0&&b.path("/MultiJob/applied")}),a.signIn=function(){a.errors=[],""==a.user.name&&a.errors.push({mess:"Username is required"}),""==a.user.password&&a.errors.push({mess:"Password is required"}),c.signIn(a.user,function(c){a.errors=a.errors.concat(c),0==c.length&&b.path("/MultiJob/applied")})}}]),angular.module("CareerClue.SignUp",["Repository"]).controller("SignUpCtrl",["$scope","Repository","$location",function(a,b,c){a.user={name:"",email:"",password:"",repass:""},a.errors=[],a.signUp=function(){a.errors=[],(""==a.user.name||""==a.user.email||""==a.user.password||""==a.user.repass)&&a.errors.push({mess:"Please fill in ALL fields"}),b.signUp(a.user,function(b){a.errors=a.errors.concat(b),0==b.length&&c.path("/MultiJob/applied")})}}]),angular.module("CareerClue.Job",["Repository"]).directive("snap",["",function(){return{restrict:"A",template:"",link:function(a,b,c){console.log("running")}}}]).directive("job",["Repository","$routeParams",function(a,b){return{restrict:"E",replace:!0,scope:{jobData:"="},templateUrl:"directives/Job/job.html",link:function(c,d,e){c.mode="",c.ngClass=[],c.template="",c.statusTypes=[],a.getStatusTypes(function(a){c.statusTypes=a}),c.$watch("jobData.DateApplied",function(){var a=864e5,b=new Date,d=c.jobData.DateApplied||b,e=Math.round((b.getTime()-d.getTime())/a);e>=365?(c.jobData.TimePassed=Math.floor(e/365),c.jobData.TimePassedLabel=" Years ago"):e>=30?(c.jobData.TimePassed=Math.floor(e/30),c.jobData.TimePassedLabel=" Months ago"):e>0?(c.jobData.TimePassed=e,c.jobData.TimePassedLabel=" Days ago"):(c.jobData.TimePassed="Today",c.jobData.TimePassedLabel="")}),c.switchMode=function(a){switch(a){case"job--view":c.mode="job--view",c.ngClass=["job--view"],c.template="directives/Job/partials/view.html";break;case"job--view-expand":c.mode="job--view-expand",c.ngClass=["job--view-expand"],c.template="directives/Job/partials/view.html",$("html, body").animate({scrollTop:d[0].offsetTop+"px"},"slow","swing");break;case"job--edit":c.mode="job--edit",c.ngClass=["job--edit"],c.template="directives/Job/partials/edit.html",$("html, body").animate({scrollTop:d[0].offsetTop+"px"},"slow","swing")}},c.toggleExpand=function(){"job--edit"!=c.mode&&c.switchMode("job--view"==c.mode?"job--view-expand":"job--view")},c.numArray=function(a){for(var b=[],c=0;a>c;c++)b.push(a);return b},c.snap=function(a){$(a).height($(a)[0].scrollHeight)},c.save=function(){a.saveJob(c.jobData,function(a){null!=a&&(c.jobData.JobInfo_Id=a,c.switchMode("job--view-expand"))})},c.cancel=function(){c.jobData.JobInfo_Id>0?c.switchMode("job--view-expand"):c.$emit("removeJob",{Id:c.jobData.JobInfo_Id})},c["delete"]=function(){var b=confirm("Are you sure you want to delete '"+c.jobData.CompanyName+"'? \n your data can't be recoverd");b&&(a.deleteJob(c.jobData),c.$emit("removeJob",{Id:c.jobData.JobInfo_Id}))},c.jobData.JobInfo_Id>0?b.companyName?c.switchMode("job--view-expand"):c.switchMode("job--view"):c.switchMode("job--edit")}}}]),angular.module("CareerClue.SideBar",["Repository"]).directive("sideBar",["Repository","$routeParams",function(a,b){return{restrict:"E",scope:{},replace:!0,templateUrl:"directives/SideBar/sidebar.html",link:function(c,d,e){c.date=new Date,c.jobs=[],c.navItems=[{Id:-2,href:"/Dash",text:"Dashboard"},{Id:-1,href:"/MultiJob",text:"View All"}],a.getUserJobs(function(a){c.jobs=a}),a.getjobStatusCount(function(a){for(var d=0;d<a.length;d++)c.navItems.push({Id:a[d].JobStatus_Id,isExpanded:!1,selected:a[d].JobStatus_Name==b.statusType,statusFilter:a[d].JobStatus_Name,href:"/MultiJob/"+a[d].JobStatus_Name,text:a[d].JobStatus_Name,count:a[d].JobStatus_Count})}),a.userInfo(function(a){a.length>0&&(c.userInfo=a[0])}),c.toggleExpand=function(a){a.isExpanded=!a.isExpanded}}}}]);